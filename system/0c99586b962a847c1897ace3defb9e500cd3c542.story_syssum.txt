The midfielder's new contract will be triggered if he plays in over half of Barcelona's games in the final two years of his current deal.
Xavi told Barcelona's official Web site: "I want to hang up my boots here.
"I've been involved with Barca all my life, coming up through the ranks, and I'd like to hang up my boots here.
Pedro has already won seven trophies at Barcelona after making his debut for the club in 2008 and scored 23 goals in all competitions last season.
"Without Mr Laporta this wouldn't have been possible.
The U.S. conceded equalizers at the end of the regulation and extra-time periods, then Japan had a player sent off before the Americans missed their first three spot-kicks.
"We lost to a great team, we really did," U.S. goalkeeper Hope Solo told ESPN, which broadcast the game.
But, despite their preparations being affected by the earthquake and tsunami that devastated their homeland in March, Japan qualified second in Group B with two wins from three matches.
But Japan refused to give up, and Homare Sawa leveled again with a near-post flick-on from Miyama's left-wing corner that deflected into the net off Wambach.
That strike was the midfielder's fifth of the tournament, earning her the golden boot award.
Wambach coolly slotted in her attempt, as she did in the shootout win over Brazil, but Kumagai clinched a famous victory.
It is all down to the players in front of me, it was a team effort," she said.
In a shootout, I just have to believe in myself, and I was very self-confident in that situation.
"We know USA are a great and strong team, but they have weak points, too, and there's always a chance to score."
"When you are playing with so much heart, that's hard to play against."
Midfielder Martins volleyed the opening goal right on halftime after Cristiano Ronaldo's shot was only blocked by Spain goalkeeper Iker Casillas.
It was only Portugal's second win in nine meetings with Spain, who have not won in Lisbon since 1934.
The striker put Romania ahead in the 34th minute after the Italian defense failed to clear, but headed past his own goalkeeper with seven minutes to play after Italy substitute Fabio Quagliarella touched on a corner by halftime replacement Andrea Pirlo.
Russia, who also hope to host the 2018 World Cup, lost 2-0 at home to Belgium as highly-rated young striker Romelu Lukaku scored both goals in Voronezh.